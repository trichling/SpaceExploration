@page "/game"
@using SpaceExploration.Game.Planets
@inject GameStateService GameStateService
@inject IJSRuntime JSRuntime
@rendermode InteractiveServer

<canvas id="gameCanvas" width="800" height="600"></canvas>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await DrawGameState();
    }
 

    private async Task DrawGameState()
    {
        var drones = GameStateService.Drones;
        foreach (var drone in drones)
        {
            await DrawDrone(drone);
        }
    }

    private async Task DrawDrone(Drone drone) => await JSRuntime.InvokeVoidAsync("drawDrone", drone.Position.X * 800, drone.Position.Y * 600, drone.Heading);
}